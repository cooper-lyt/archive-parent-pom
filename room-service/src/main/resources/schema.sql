SET SESSION FOREIGN_KEY_CHECKS=0;

/* Drop Tables */

DROP TABLE IF EXISTS BOX;
DROP TABLE IF EXISTS CELL;
DROP TABLE IF EXISTS CABINET;
DROP TABLE IF EXISTS RACK;
DROP TABLE IF EXISTS ROOM;




/* Create Tables */

CREATE TABLE BOX
(
    BOX_ID varchar(32) NOT NULL,
    _FULL boolean NOT NULL,
    EMPTY boolean NOT NULL,
    _SIZE int NOT NULL,
    SEQ int NOT NULL,
    DESCRIPTION varchar(256),
    CELL_ID varchar(24) NOT NULL,
    OLD boolean NOT NULL,
    PRIMARY KEY (BOX_ID)
) ENGINE = InnoDB DEFAULT CHARACTER SET utf8;


CREATE TABLE CABINET
(
    CABINET_ID varchar(16) NOT NULL,
    NAME varchar(8) NOT NULL,
    RACK_ID varchar(8) NOT NULL,
    SEQ int NOT NULL,
    PERCENTAGE int NOT NULL,
    PRIMARY KEY (CABINET_ID)
) ENGINE = InnoDB DEFAULT CHARACTER SET utf8;


CREATE TABLE CELL
(
    CELL_ID varchar(24) NOT NULL,
    NAME varchar(8) NOT NULL,
    CABINET_ID varchar(16) NOT NULL,
    _SIZE int,
    SEQ int NOT NULL,
    _ROW int NOT NULL,
    _COL int NOT NULL,
    PERCENTAGE int NOT NULL,
    PRIMARY KEY (CELL_ID)
) ENGINE = InnoDB DEFAULT CHARACTER SET utf8;


CREATE TABLE RACK
(
    RACK_ID varchar(8) NOT NULL,
    NAME varchar(4) NOT NULL,
    ROOM_ID varchar(4) NOT NULL,
    PERCENTAGE int NOT NULL,
    SEQ int NOT NULL,
    PRIMARY KEY (RACK_ID)
) ENGINE = InnoDB DEFAULT CHARACTER SET utf8;


CREATE TABLE ROOM
(
    ROOM_ID varchar(4) NOT NULL,
    NAME varchar(16) NOT NULL,
    DESCRIPTION varchar(256),
    PERCENTAGE int NOT NULL,
    SEQ int NOT NULL,
    PRIMARY KEY (ROOM_ID)
) ENGINE = InnoDB DEFAULT CHARACTER SET utf8;



/* Create Foreign Keys */

ALTER TABLE CELL
    ADD FOREIGN KEY (CABINET_ID)
        REFERENCES CABINET (CABINET_ID)
        ON UPDATE RESTRICT
        ON DELETE RESTRICT
;


ALTER TABLE BOX
    ADD FOREIGN KEY (CELL_ID)
        REFERENCES CELL (CELL_ID)
        ON UPDATE RESTRICT
        ON DELETE RESTRICT
;


ALTER TABLE CABINET
    ADD FOREIGN KEY (RACK_ID)
        REFERENCES RACK (RACK_ID)
        ON UPDATE RESTRICT
        ON DELETE RESTRICT
;


ALTER TABLE RACK
    ADD FOREIGN KEY (ROOM_ID)
        REFERENCES ROOM (ROOM_ID)
        ON UPDATE RESTRICT
        ON DELETE RESTRICT
;

/* INSERT TEST DATA */

INSERT INTO ROOM(ROOM_ID,NAME,PERCENTAGE,SEQ) VALUES('A','一号档案室',10,1);
INSERT INTO ROOM(ROOM_ID,NAME,PERCENTAGE,SEQ) VALUES('B','二号档案室',0,2);
INSERT INTO ROOM(ROOM_ID,NAME,PERCENTAGE,SEQ) VALUES('C','三号档案室',0,3);
INSERT INTO ROOM(ROOM_ID,NAME,PERCENTAGE,SEQ) VALUES('D','四号档案室',0,4);

INSERT INTO RACK(RACK_ID,NAME,ROOM_ID,PERCENTAGE,SEQ) VALUES('A-1','1','A',10,1);
INSERT INTO RACK(RACK_ID,NAME,ROOM_ID,PERCENTAGE,SEQ) VALUES('A-2','2','A',0,2);

INSERT INTO RACK(RACK_ID,NAME,ROOM_ID,PERCENTAGE,SEQ) VALUES('B-1','1','B',0,1);
INSERT INTO RACK(RACK_ID,NAME,ROOM_ID,PERCENTAGE,SEQ) VALUES('B-2','2','B',0,2);

INSERT INTO CABINET(CABINET_ID,NAME,RACK_ID,SEQ,PERCENTAGE) VALUES('A-1-1B','1B','A-1',1,10);
INSERT INTO CABINET(CABINET_ID,NAME,RACK_ID,SEQ,PERCENTAGE) VALUES('A-1-2A','2A','A-1',2,0);
INSERT INTO CABINET(CABINET_ID,NAME,RACK_ID,SEQ,PERCENTAGE) VALUES('A-1-2B','2B','A-1',3,0);
INSERT INTO CABINET(CABINET_ID,NAME,RACK_ID,SEQ,PERCENTAGE) VALUES('A-1-3A','3A','A-1',4,0);
INSERT INTO CABINET(CABINET_ID,NAME,RACK_ID,SEQ,PERCENTAGE) VALUES('A-1-3B','3B','A-1',5,0);
INSERT INTO CABINET(CABINET_ID,NAME,RACK_ID,SEQ,PERCENTAGE) VALUES('A-1-4A','4A','A-1',6,0);
INSERT INTO CABINET(CABINET_ID,NAME,RACK_ID,SEQ,PERCENTAGE) VALUES('A-1-4B','4B','A-1',7,0);
INSERT INTO CABINET(CABINET_ID,NAME,RACK_ID,SEQ,PERCENTAGE) VALUES('A-1-5A','5A','A-1',8,0);
INSERT INTO CABINET(CABINET_ID,NAME,RACK_ID,SEQ,PERCENTAGE) VALUES('A-1-5B','5B','A-1',9,0);
INSERT INTO CABINET(CABINET_ID,NAME,RACK_ID,SEQ,PERCENTAGE) VALUES('A-1-6A','6A','A-1',10,0);
INSERT INTO CABINET(CABINET_ID,NAME,RACK_ID,SEQ,PERCENTAGE) VALUES('A-1-6B','6B','A-1',11,0);
INSERT INTO CABINET(CABINET_ID,NAME,RACK_ID,SEQ,PERCENTAGE) VALUES('A-1-7A','7A','A-1',12,0);

INSERT INTO CELL(CELL_ID,NAME,CABINET_ID,_SIZE,SEQ,_ROW,_COL,PERCENTAGE) VALUES('A-1-6A-1-1','1-1','A-1-1B',10,1,1,1,100);
INSERT INTO CELL(CELL_ID,NAME,CABINET_ID,_SIZE,SEQ,_ROW,_COL,PERCENTAGE) VALUES('A-1-6A-1-2','1-2','A-1-1B',10,2,1,2,50);
INSERT INTO CELL(CELL_ID,NAME,CABINET_ID,_SIZE,SEQ,_ROW,_COL,PERCENTAGE) VALUES('A-1-6A-1-3','1-3','A-1-1B',10,3,1,3,0);
INSERT INTO CELL(CELL_ID,NAME,CABINET_ID,_SIZE,SEQ,_ROW,_COL,PERCENTAGE) VALUES('A-1-6A-1-4','1-4','A-1-1B',10,4,1,4,0);
INSERT INTO CELL(CELL_ID,NAME,CABINET_ID,_SIZE,SEQ,_ROW,_COL,PERCENTAGE) VALUES('A-1-6A-2-1','2-1','A-1-1B',10,5,2,1,0);
INSERT INTO CELL(CELL_ID,NAME,CABINET_ID,_SIZE,SEQ,_ROW,_COL,PERCENTAGE) VALUES('A-1-6A-2-2','2-2','A-1-1B',10,6,2,2,0);
INSERT INTO CELL(CELL_ID,NAME,CABINET_ID,_SIZE,SEQ,_ROW,_COL,PERCENTAGE) VALUES('A-1-6A-2-3','2-3','A-1-1B',10,7,2,3,0);
INSERT INTO CELL(CELL_ID,NAME,CABINET_ID,_SIZE,SEQ,_ROW,_COL,PERCENTAGE) VALUES('A-1-6A-2-4','2-4','A-1-1B',10,8,2,4,0);
INSERT INTO CELL(CELL_ID,NAME,CABINET_ID,_SIZE,SEQ,_ROW,_COL,PERCENTAGE) VALUES('A-1-6A-3-1','3-1','A-1-1B',10,9,3,1,0);
INSERT INTO CELL(CELL_ID,NAME,CABINET_ID,_SIZE,SEQ,_ROW,_COL,PERCENTAGE) VALUES('A-1-6A-3-2','3-2','A-1-1B',10,10,3,2,0);
INSERT INTO CELL(CELL_ID,NAME,CABINET_ID,_SIZE,SEQ,_ROW,_COL,PERCENTAGE) VALUES('A-1-6A-3-3','3-3','A-1-1B',10,11,3,3,0);
INSERT INTO CELL(CELL_ID,NAME,CABINET_ID,_SIZE,SEQ,_ROW,_COL,PERCENTAGE) VALUES('A-1-6A-3-4','3-4','A-1-1B',10,12,3,4,0);


INSERT BOX(BOX_ID, `_FULL`, `EMPTY`, `_SIZE`, SEQ, CELL_ID, OLD) VALUES('A-1-6A-1-1-1',true,false,1,1,'A-1-6A-1-1',true);
INSERT BOX(BOX_ID, `_FULL`, `EMPTY`, `_SIZE`, SEQ, CELL_ID, OLD) VALUES('A-1-6A-1-1-2',true,false,1,2,'A-1-6A-1-1',true);
INSERT BOX(BOX_ID, `_FULL`, `EMPTY`, `_SIZE`, SEQ, CELL_ID, OLD) VALUES('A-1-6A-1-1-3',true,false,1,3,'A-1-6A-1-1',true);
INSERT BOX(BOX_ID, `_FULL`, `EMPTY`, `_SIZE`, SEQ, CELL_ID, OLD) VALUES('A-1-6A-1-1-4',true,false,2,4,'A-1-6A-1-1',true);
INSERT BOX(BOX_ID, `_FULL`, `EMPTY`, `_SIZE`, SEQ, CELL_ID, OLD) VALUES('A-1-6A-1-1-5',true,false,1,5,'A-1-6A-1-1',true);
INSERT BOX(BOX_ID, `_FULL`, `EMPTY`, `_SIZE`, SEQ, CELL_ID, OLD) VALUES('A-1-6A-1-1-6',true,false,2,6,'A-1-6A-1-1',true);
INSERT BOX(BOX_ID, `_FULL`, `EMPTY`, `_SIZE`, SEQ, CELL_ID, OLD) VALUES('A-1-6A-1-1-7',true,false,1,7,'A-1-6A-1-1',true);
INSERT BOX(BOX_ID, `_FULL`, `EMPTY`, `_SIZE`, SEQ, CELL_ID, OLD) VALUES('A-1-6A-1-1-8',true,false,1,8,'A-1-6A-1-1',true);


INSERT BOX(BOX_ID, `_FULL`, `EMPTY`, `_SIZE`, SEQ, CELL_ID, OLD) VALUES('A-1-6A-1-2-1',true,false,1,1,'A-1-6A-1-2',true);
INSERT BOX(BOX_ID, `_FULL`, `EMPTY`, `_SIZE`, SEQ, CELL_ID, OLD) VALUES('A-1-6A-1-2-2',true,false,1,2,'A-1-6A-1-2',true);
INSERT BOX(BOX_ID, `_FULL`, `EMPTY`, `_SIZE`, SEQ, CELL_ID, OLD) VALUES('A-1-6A-1-2-3',true,false,2,3,'A-1-6A-1-2',true);
INSERT BOX(BOX_ID, `_FULL`, `EMPTY`, `_SIZE`, SEQ, CELL_ID, OLD) VALUES('A-1-6A-1-2-4',false,false,1,4,'A-1-6A-1-2',false);
INSERT BOX(BOX_ID, `_FULL`, `EMPTY`, `_SIZE`, SEQ, CELL_ID, OLD) VALUES('A-1-6A-1-2-5',false,true,1,5,'A-1-6A-1-2',false);